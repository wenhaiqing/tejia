{php $share = M('setting')->getValue('share');}

<div id="share-logo" name="share_logo" content="{php echo tomedia($share['share_image'])}" style="display: none;"></div>
<div id="share-url-id" name="share_url" content="" style="display: none;"></div>
<div id="share-title-id" name="share_title" content="{php echo $share['share_title']}" style="display: none;"></div>
<div id="share-content-id" name="share_content" content="{php echo $share['share_desc']}" style="display: none;" ></div>

<script>
    require(['weixin','jquery'],function(wx,$){
        wx.config(jssdkconfig);
        var wxshare = {
            debug : false,
            data : {

            },
            init : function(){
                wxshare.functions.ready();
            },
            event : function(){

            },
            functions : {
                ready : function () {
                    wx.ready(function () {
                        wx.onMenuShareAppMessage({
                            title: document.getElementsByName("share_title")[0].getAttribute("content"),
                            desc:  document.getElementsByName("share_content")[0].getAttribute("content"),
                            link:  document.getElementsByName("share_url")[0].getAttribute("content"),
                            imgUrl: document.getElementsByName("share_logo")[0].getAttribute("content"),
                            trigger: function (res) {},
                            success: function (res) {
                                shareCallback();
                            },
                            cancel: function (res) {},
                            fail: function (res) {

                            }
                        });
                        wx.onMenuShareTimeline({
                            title: document.getElementsByName("share_title")[0].getAttribute("content"),
                            desc:  document.getElementsByName("share_content")[0].getAttribute("content"),
                            link:  document.getElementsByName("share_url")[0].getAttribute("content"),
                            imgUrl: document.getElementsByName("share_logo")[0].getAttribute("content"),
                            trigger: function (res) {},
                            success: function (res) {
                                shareCallback();
                            },
                            cancel: function (res) {},
                            fail: function (res) {}
                        });
                        wx.onMenuShareQQ({
                            title: document.getElementsByName("share_title")[0].getAttribute("content"),
                            desc:  document.getElementsByName("share_content")[0].getAttribute("content"),
                            link:  document.getElementsByName("share_url")[0].getAttribute("content"),
                            imgUrl: document.getElementsByName("share_logo")[0].getAttribute("content"),
                            trigger: function (res) {},
                            success: function (res) {
                                //shareCallback();
                            },
                            cancel: function (res) {},
                            fail: function (res) {}
                        });
                        wx.onMenuShareWeibo({
                            title: document.getElementsByName("share_title")[0].getAttribute("content"),
                            desc:  document.getElementsByName("share_content")[0].getAttribute("content"),
                            link:  document.getElementsByName("share_url")[0].getAttribute("content"),
                            imgUrl: document.getElementsByName("share_logo")[0].getAttribute("content"),
                            trigger: function (res) {},
                            success: function (res) {
                                //shareCallback();
                            },
                            cancel: function (res) {},
                            fail: function (res) {}
                        });
                    });
                }
            }

        }
        $(function () {
            wxshare.init();
            wxshare.event();
        });
    });
</script>